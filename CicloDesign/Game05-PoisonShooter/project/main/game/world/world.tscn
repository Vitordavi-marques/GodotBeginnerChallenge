[gd_scene load_steps=11 format=2]

[ext_resource path="res://entities/entity_player/entity_player.tscn" type="PackedScene" id=1]
[ext_resource path="res://components/entity_spawner/nst_manager/nst_manager.tscn" type="PackedScene" id=2]
[ext_resource path="res://main/game/world/scripts/wave_manager.gd" type="Script" id=3]
[ext_resource path="res://libs/gt_pattern_label/gt_pattern_label.gd" type="Script" id=4]
[ext_resource path="res://assets/fonts/diffusion-bold-s32-o2.tres" type="DynamicFont" id=5]
[ext_resource path="res://entities/entity_enemy/entity_enemy.tscn" type="PackedScene" id=6]
[ext_resource path="res://libs/gt_collision_polygon_2d/gt_collision_polygon_2d.gd" type="Script" id=7]

[sub_resource type="RectangleShape2D" id=1]
extents = Vector2( 50, 270 )

[sub_resource type="RectangleShape2D" id=2]
extents = Vector2( 480, 50 )

[sub_resource type="Animation" id=3]
resource_name = "game_start"
length = 0.1
tracks/0/type = "method"
tracks/0/path = NodePath("WaveManager")
tracks/0/interp = 1
tracks/0/loop_wrap = true
tracks/0/imported = false
tracks/0/enabled = true
tracks/0/keys = {
"times": PoolRealArray( 0 ),
"transitions": PoolRealArray( 1 ),
"values": [ {
"args": [  ],
"method": "start"
} ]
}

[node name="World" type="Node2D"]
__meta__ = {
"_edit_lock_": true
}

[node name="background_color" type="ColorRect" parent="."]
margin_right = 40.0
margin_bottom = 40.0
rect_min_size = Vector2( 960, 540 )
color = Color( 0.2, 0.172549, 0.313726, 1 )
__meta__ = {
"_edit_lock_": true,
"_edit_use_anchors_": false
}

[node name="HUD" type="CanvasLayer" parent="."]

[node name="root" type="Control" parent="HUD"]
anchor_right = 1.0
anchor_bottom = 1.0
__meta__ = {
"_edit_lock_": true,
"_edit_use_anchors_": false
}

[node name="current_wave_label" type="Label" parent="HUD/root"]
margin_left = 10.0
margin_top = 10.0
margin_right = 51.0
margin_bottom = 14.0
custom_fonts/font = ExtResource( 5 )
custom_colors/font_color = Color( 0.886275, 0.952941, 0.894118, 1 )
text = "Wave: 1"
script = ExtResource( 4 )
__meta__ = {
"_edit_lock_": true,
"_edit_use_anchors_": false
}
pattern_text = "Wave: %s"

[node name="Terrain" type="StaticBody2D" parent="."]
collision_layer = 2
collision_mask = 36
__meta__ = {
"_edit_lock_": true
}

[node name="1" type="CollisionPolygon2D" parent="Terrain"]
polygon = PoolVector2Array( -128, 0, 0, 0, 0, 640, -128, 640 )
script = ExtResource( 7 )
__meta__ = {
"_edit_lock_": true
}
graphics_color = Color( 0.2, 0.172549, 0.313726, 1 )

[node name="2" type="CollisionPolygon2D" parent="Terrain"]
polygon = PoolVector2Array( 960, 0, 1088, 0, 1088, 640, 960, 640 )
script = ExtResource( 7 )
__meta__ = {
"_edit_lock_": true
}
graphics_color = Color( 0.2, 0.172549, 0.313726, 1 )

[node name="3" type="CollisionPolygon2D" parent="Terrain"]
polygon = PoolVector2Array( -128, -128, 1088, -128, 1088, 0, -128, 0 )
script = ExtResource( 7 )
__meta__ = {
"_edit_lock_": true
}
graphics_color = Color( 0.2, 0.172549, 0.313726, 1 )

[node name="4" type="CollisionPolygon2D" parent="Terrain"]
polygon = PoolVector2Array( 0, 536, 960, 536, 960, 640, 0, 640 )
script = ExtResource( 7 )
__meta__ = {
"_edit_lock_": true
}
graphics_color = Color( 0.2, 0.172549, 0.313726, 1 )

[node name="WaveManager" parent="." instance=ExtResource( 2 )]
script = ExtResource( 3 )
_entity_template = ExtResource( 6 )
enemy_properties = {
"random_strength": [ 1.08, 1.16, 1.24, 1.32, 1.4, 1.48 ],
"speed": [ 1.0, 1.1, 1.2, 1.3, 1.45, 1.6 ]
}
wave_properties = {
"replacement_time": [ 0.5, 0.4, 0.3, 0.3, 0.2, 0.2 ],
"screen_enemies": [ 3, 3, 4, 4, 5, 5 ],
"time_between_waves": [ 3.0 ],
"wave_enemies": [ 8, 11, 11, 15, 14, 19 ]
}
max_waves = 6
_player_path = NodePath("../Player")

[node name="1" type="CollisionShape2D" parent="WaveManager"]
visible = false
position = Vector2( -50, 270 )
shape = SubResource( 1 )
__meta__ = {
"_edit_lock_": true
}

[node name="2" type="CollisionShape2D" parent="WaveManager"]
visible = false
position = Vector2( 1010, 270 )
shape = SubResource( 1 )
__meta__ = {
"_edit_lock_": true
}

[node name="3" type="CollisionShape2D" parent="WaveManager"]
visible = false
position = Vector2( 480, -50 )
shape = SubResource( 2 )
__meta__ = {
"_edit_lock_": true
}

[node name="4" type="CollisionShape2D" parent="WaveManager"]
visible = false
position = Vector2( 480, 590 )
shape = SubResource( 2 )
__meta__ = {
"_edit_lock_": true
}

[node name="Player" parent="." instance=ExtResource( 1 )]
position = Vector2( 459, 283 )

[node name="AnimationPlayer" type="AnimationPlayer" parent="."]
autoplay = "game_start"
anims/game_start = SubResource( 3 )

[connection signal="updated_wave" from="WaveManager" to="HUD/root/current_wave_label" method="apply_text_simple"]
